<Window x:Class="WindowsSetup.App.Views.SystemIdSpooferWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="System Identity Spoofer" 
        Height="700" Width="1000"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource MaterialDesignPaper}">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <materialDesign:Card Grid.Row="0" Margin="10" Padding="16" Background="#FF5722">
            <StackPanel>
                <TextBlock Text="âš ï¸ SYSTEM IDENTITY SPOOFER" 
                          FontSize="20" FontWeight="Bold" 
                          Foreground="White" HorizontalAlignment="Center"/>
                <TextBlock Text="Advanced Tool for Security Testing - Use with Caution" 
                          FontSize="12" Foreground="White" 
                          HorizontalAlignment="Center" Opacity="0.9"/>
            </StackPanel>
        </materialDesign:Card>

        <!-- Main Content -->
        <TabControl Grid.Row="1" Margin="10" Style="{StaticResource MaterialDesignFilledTabControl}">
            
            <!-- Tab 1: Quick Actions -->
            <TabItem Header="Quick Actions">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        
                        <!-- Status Card -->
                        <materialDesign:Card Margin="0,0,0,16">
                            <StackPanel Margin="16">
                                <TextBlock Text="ðŸ” Current Status" FontSize="16" FontWeight="Bold" Margin="0,0,0,12"/>
                                <StackPanel x:Name="StatusPanel">
                                    <TextBlock x:Name="StatusMachineGuids" Text="â€¢ Machine GUIDs: Original" Margin="0,2"/>
                                    <TextBlock x:Name="StatusMacAddresses" Text="â€¢ MAC Addresses: Original" Margin="0,2"/>
                                    <TextBlock x:Name="StatusVolumeSerials" Text="â€¢ Volume Serials: Original" Margin="0,2"/>
                                    <TextBlock x:Name="StatusNetwork" Text="â€¢ Network: Normal" Margin="0,2"/>
                                </StackPanel>
                                <Button Content="ðŸ”„ Refresh Status" Click="RefreshStatus_Click" 
                                       Style="{StaticResource MaterialDesignOutlinedButton}"
                                       Margin="0,12,0,0" HorizontalAlignment="Left"/>
                            </StackPanel>
                        </materialDesign:Card>

                        <!-- Quick Actions -->
                        <materialDesign:Card Margin="0,0,0,16">
                            <StackPanel Margin="16">
                                <TextBlock Text="âš¡ Quick Actions" FontSize="16" FontWeight="Bold" Margin="0,0,0,12"/>
                                
                                <Button Content="ðŸŽ¯ Spoof All Machine IDs" 
                                       Click="SpoofAll_Click"
                                       Background="#4CAF50" Foreground="White"
                                       Height="50" Margin="0,8" FontSize="14" FontWeight="Bold"/>
                                
                                <Button Content="â†©ï¸ Restore All to Original" 
                                       Click="RestoreAll_Click"
                                       Background="#2196F3" Foreground="White"
                                       Height="50" Margin="0,8" FontSize="14" FontWeight="Bold"/>
                                
                                <Button Content="ðŸ’¾ Create Backup Now" 
                                       Click="CreateBackup_Click"
                                       Style="{StaticResource MaterialDesignOutlinedButton}"
                                       Height="40" Margin="0,8"/>
                            </StackPanel>
                        </materialDesign:Card>

                        <!-- Warning -->
                        <materialDesign:Card Background="#FFF3E0">
                            <StackPanel Margin="16">
                                <TextBlock Text="âš ï¸ Important Warnings" FontWeight="Bold"/>
                                <TextBlock TextWrapping="Wrap" Margin="0,8,0,0">
                                    â€¢ Always create backups before spoofing<LineBreak/>
                                    â€¢ Some changes may require reboot<LineBreak/>
                                    â€¢ Test on VM first if possible<LineBreak/>
                                    â€¢ Use for security testing only
                                </TextBlock>
                            </StackPanel>
                        </materialDesign:Card>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Tab 2: Individual Controls -->
            <TabItem Header="Individual Controls">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        
                        <!-- Machine GUIDs -->
                        <Expander Header="ðŸ”§ Machine GUIDs" IsExpanded="True" Margin="0,0,0,8">
                            <StackPanel Margin="16">
                                <TextBlock TextWrapping="Wrap" Opacity="0.8" Margin="0,0,0,12">
                                    Spoofs Windows Machine GUID, SQM Client ID, and Hardware Profile GUID.
                                </TextBlock>
                                <Button Content="Spoof Machine GUIDs" Click="SpoofMachineGuids_Click"
                                       Background="#FF9800" Foreground="White" Height="40"/>
                            </StackPanel>
                        </Expander>

                        <!-- Hardware IDs -->
                        <Expander Header="ðŸ–¥ï¸ Hardware IDs" Margin="0,0,0,8">
                            <StackPanel Margin="16">
                                <TextBlock TextWrapping="Wrap" Opacity="0.8" Margin="0,0,0,12">
                                    Spoofs disk serial numbers, motherboard UUID, and other hardware identifiers.
                                </TextBlock>
                                <materialDesign:Card Background="#FFEBEE" Margin="0,0,0,12">
                                    <StackPanel Margin="12">
                                        <TextBlock Text="âš ï¸ NOTE:" FontWeight="Bold" Foreground="#D32F2F"/>
                                        <TextBlock TextWrapping="Wrap" Foreground="#D32F2F">
                                            Some hardware IDs are firmware-based and cannot be fully spoofed. This tool modifies registry entries that most software checks.
                                        </TextBlock>
                                    </StackPanel>
                                </materialDesign:Card>
                                <Button Content="Spoof Hardware IDs" Click="SpoofHardwareIds_Click"
                                       Background="#FF5722" Foreground="White" Height="40"/>
                            </StackPanel>
                        </Expander>

                        <!-- MAC Addresses -->
                        <Expander Header="ðŸŒ MAC Addresses" Margin="0,0,0,8">
                            <StackPanel Margin="16">
                                <TextBlock TextWrapping="Wrap" Opacity="0.8" Margin="0,0,0,12">
                                    Change MAC addresses of network adapters (real-time, no reboot).
                                </TextBlock>
                                <Button Content="ðŸ“‹ Load Network Adapters" Click="LoadAdapters_Click"
                                       Style="{StaticResource MaterialDesignOutlinedButton}" Margin="0,0,0,8"/>
                                <ListView x:Name="AdaptersList" Height="200" Margin="0,0,0,8">
                                    <ListView.View>
                                        <GridView>
                                            <GridViewColumn Header="Adapter" Width="200" DisplayMemberBinding="{Binding Name}"/>
                                            <GridViewColumn Header="Current MAC" Width="150" DisplayMemberBinding="{Binding CurrentMac}"/>
                                            <GridViewColumn Header="Status" Width="100" DisplayMemberBinding="{Binding IsSpoofed}"/>
                                        </GridView>
                                    </ListView.View>
                                </ListView>
                                <UniformGrid Rows="1" Columns="2">
                                    <Button Content="Spoof Selected" Click="SpoofSelectedMac_Click"
                                           Background="#4CAF50" Foreground="White" Margin="0,0,4,0"/>
                                    <Button Content="Restore Selected" Click="RestoreSelectedMac_Click"
                                           Background="#F44336" Foreground="White" Margin="4,0,0,0"/>
                                </UniformGrid>
                            </StackPanel>
                        </Expander>

                        <!-- Volume Serials -->
                        <Expander Header="ðŸ’½ Volume Serials (Experimental)" Margin="0,0,0,8">
                            <StackPanel Margin="16">
                                <materialDesign:Card Background="#FFEBEE" Margin="0,0,0,12">
                                    <StackPanel Margin="12">
                                        <TextBlock Text="âš ï¸ WARNING: Experimental Feature" FontWeight="Bold" Foreground="#D32F2F"/>
                                        <TextBlock TextWrapping="Wrap" Foreground="#D32F2F">
                                            Changing volume serials may cause Windows activation issues or software malfunctions. Use at your own risk!
                                        </TextBlock>
                                    </StackPanel>
                                </materialDesign:Card>
                                <Button Content="ðŸ“‹ Load Volumes" Click="LoadVolumes_Click"
                                       Style="{StaticResource MaterialDesignOutlinedButton}" Margin="0,0,0,8"/>
                                <ListView x:Name="VolumesList" Height="150" Margin="0,0,0,8">
                                    <ListView.View>
                                        <GridView>
                                            <GridViewColumn Header="Drive" Width="80" DisplayMemberBinding="{Binding DriveLetter}"/>
                                            <GridViewColumn Header="Label" Width="150" DisplayMemberBinding="{Binding Label}"/>
                                            <GridViewColumn Header="Serial" Width="120" DisplayMemberBinding="{Binding CurrentSerial}"/>
                                        </GridView>
                                    </ListView.View>
                                </ListView>
                                <TextBlock TextWrapping="Wrap" Opacity="0.7" FontSize="11" Margin="0,0,0,8">
                                    Note: Volume serial spoofing is disabled for safety. This feature requires external tools.
                                </TextBlock>
                            </StackPanel>
                        </Expander>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Tab 3: IP Masking -->
            <TabItem Header="IP Masking">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        
                        <!-- Current IP -->
                        <materialDesign:Card Margin="0,0,0,16">
                            <StackPanel Margin="16">
                                <TextBlock Text="ðŸŒ Current IP Information" FontSize="16" FontWeight="Bold" Margin="0,0,0,8"/>
                                <TextBlock x:Name="CurrentIpText" Text="IP: Checking..." Margin="0,4"/>
                                <Button Content="ðŸ”„ Check IP" Click="CheckIp_Click"
                                       Style="{StaticResource MaterialDesignOutlinedButton}"
                                       Margin="0,8,0,0" HorizontalAlignment="Left"/>
                            </StackPanel>
                        </materialDesign:Card>

                        <!-- Tor -->
                        <GroupBox Header="ðŸ§… Tor Network" Margin="0,0,0,16">
                            <StackPanel Margin="16">
                                <TextBlock TextWrapping="Wrap" Opacity="0.8" Margin="0,0,0,12">
                                    Route your connection through the Tor network for anonymity.
                                </TextBlock>
                                <TextBlock x:Name="TorStatusText" Text="Status: Not installed" Margin="0,0,0,8"/>
                                
                                <UniformGrid Rows="1" Columns="2">
                                    <Button x:Name="TorDownloadBtn" Content="â¬‡ï¸ Download Tor" Click="DownloadTor_Click"
                                           Style="{StaticResource MaterialDesignOutlinedButton}" Margin="0,0,4,0"/>
                                    <ToggleButton x:Name="TorToggle" Content="Start Tor" 
                                                 Checked="TorToggle_Checked" Unchecked="TorToggle_Unchecked"
                                                 IsEnabled="False" Margin="4,0,0,0"/>
                                </UniformGrid>
                                
                                <TextBlock TextWrapping="Wrap" Opacity="0.7" FontSize="11" Margin="0,12,0,0">
                                    Note: First download Tor, then toggle to start/stop the service.
                                </TextBlock>
                            </StackPanel>
                        </GroupBox>

                        <!-- OpenVPN -->
                        <GroupBox Header="ðŸ” OpenVPN" Margin="0,0,0,16">
                            <StackPanel Margin="16">
                                <TextBlock TextWrapping="Wrap" Opacity="0.8" Margin="0,0,0,12">
                                    Connect to VPN using OpenVPN configuration files (.ovpn).
                                </TextBlock>
                                <TextBlock x:Name="VpnStatusText" Text="Status: Disconnected" Margin="0,0,0,8"/>
                                
                                <Button Content="ðŸ“ Import .ovpn Config" Click="ImportVpnConfig_Click"
                                       Style="{StaticResource MaterialDesignOutlinedButton}" Margin="0,0,0,8"/>
                                
                                <ComboBox x:Name="VpnConfigsCombo" materialDesign:HintAssist.Hint="Select VPN Config"
                                         Margin="0,0,0,8" IsEnabled="False"/>
                                
                                <ToggleButton x:Name="VpnToggle" Content="Connect" 
                                             Checked="VpnToggle_Checked" Unchecked="VpnToggle_Unchecked"
                                             IsEnabled="False"/>
                                
                                <TextBlock TextWrapping="Wrap" Opacity="0.7" FontSize="11" Margin="0,12,0,0">
                                    Note: OpenVPN integration coming in Phase 5
                                </TextBlock>
                            </StackPanel>
                        </GroupBox>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Tab 4: Backups -->
            <TabItem Header="Backups">
                <Grid Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,12">
                        <Button Content="ðŸ”„ Refresh List" Click="RefreshBackups_Click"
                               Style="{StaticResource MaterialDesignOutlinedButton}" Margin="0,0,8,0"/>
                        <Button Content="ðŸ—‘ï¸ Delete Selected" Click="DeleteBackup_Click"
                               Style="{StaticResource MaterialDesignOutlinedButton}"/>
                    </StackPanel>

                    <ListView x:Name="BackupsList" Grid.Row="1" SelectionChanged="BackupsList_SelectionChanged">
                        <ListView.View>
                            <GridView>
                                <GridViewColumn Header="Backup Date" Width="180" DisplayMemberBinding="{Binding BackupDate, StringFormat='{}{0:yyyy-MM-dd HH:mm:ss}'}"/>
                                <GridViewColumn Header="Description" Width="250" DisplayMemberBinding="{Binding Description}"/>
                                <GridViewColumn Header="Items" Width="100">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding RegistryBackups.Count}"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                            </GridView>
                        </ListView.View>
                    </ListView>

                    <Button Grid.Row="2" Content="â†©ï¸ Restore Selected Backup" 
                           Click="RestoreBackup_Click"
                           Background="#2196F3" Foreground="White"
                           Height="45" Margin="0,12,0,0" FontSize="14" FontWeight="Bold"/>
                </Grid>
            </TabItem>

            <!-- Tab 5: Settings -->
            <TabItem Header="Settings">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        
                        <TextBlock Text="âš™ï¸ Spoofing Options" FontSize="16" FontWeight="Bold" Margin="0,0,0,12"/>
                        
                        <CheckBox x:Name="ChkAutoBackup" Content="Create automatic backup before spoofing" 
                                 IsChecked="True" Margin="0,8"/>
                        <CheckBox x:Name="ChkShowWarnings" Content="Show warning dialogs" 
                                 IsChecked="True" Margin="0,8"/>
                        <CheckBox x:Name="ChkRestoreOnReboot" Content="Restore original IDs on system reboot" 
                                 IsEnabled="False" Margin="0,8"/>

                        <Separator Margin="0,20"/>

                        <TextBlock Text="â„¹ï¸ Information" FontSize="16" FontWeight="Bold" Margin="0,0,0,12"/>
                        
                        <materialDesign:Card>
                            <StackPanel Margin="16">
                                <TextBlock Text="About Test Mode" FontWeight="Bold" Margin="0,0,0,8"/>
                                <TextBlock TextWrapping="Wrap">
                                    Test Mode is NOT required for this tool. We use registry-based spoofing which works without disabling driver signature enforcement.
                                </TextBlock>
                            </StackPanel>
                        </materialDesign:Card>

                        <materialDesign:Card Margin="0,12,0,0" Background="#E3F2FD">
                            <StackPanel Margin="16">
                                <TextBlock Text="ðŸ’¡ Tips" FontWeight="Bold" Margin="0,0,0,8"/>
                                <TextBlock TextWrapping="Wrap">
                                    â€¢ Always test on a VM first if possible<LineBreak/>
                                    â€¢ Keep backups of your original IDs<LineBreak/>
                                    â€¢ Some changes require administrator rights<LineBreak/>
                                    â€¢ MAC address changes are immediate<LineBreak/>
                                    â€¢ Registry changes may need reboot
                                </TextBlock>
                            </StackPanel>
                        </materialDesign:Card>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

        </TabControl>

        <!-- Log Output -->
        <materialDesign:Card Grid.Row="2" Margin="10" Padding="8">
            <StackPanel>
                <TextBlock Text="ðŸ“‹ Log Output" FontWeight="Bold" Margin="0,0,0,4"/>
                <ScrollViewer Height="100" VerticalScrollBarVisibility="Auto">
                    <TextBox x:Name="LogOutput" IsReadOnly="True" 
                            TextWrapping="Wrap" BorderThickness="0"
                            Background="Transparent"/>
                </ScrollViewer>
            </StackPanel>
        </materialDesign:Card>
    </Grid>
</Window>

